saveDocInfo : >-
 insert into doctor (fname, mname, lname, dob, gender, doj, age, address1, city, state, country, pcode, ssn, landphone, mobile, email, prnum, qualification, specialization, shift, etype, department, designation, address2, id, status, docID)
 values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 'Active', ?)
 on duplicate key update fname = values(fname), mname = values(mname), lname = values(lname), dob = values(dob), gender = values(gender),doj = values(doj), age = values(age), address1 = values(address1), city= values(city), country = values(country), 
 pcode = values(pcode), ssn = values(ssn), landphone = values(landphone), mobile = values(mobile), email = values(email), prnum = values(prnum), qualification = values(qualification), specialization = values(specialization), shift = values(shift), 
 etype = values(etype), department = values(department), designation = values(designation), address2 = values(address2), id = values(id)

saveUserInfo : >-
 insert into users(username,password,enabled,userid,id,status) values(?, ?, '1', ?, ?, 'on') on duplicate key update password = values(password), username = values(username), id = values(id)

saveUserRoleInfo : >-
 insert into userrole(roleid,username,userrole,userid,useremail,id,status) values(1, ?, 'DOCTOR', ?, ?, ?,'on') on duplicate key update username = values(username), id= values(id)

updateDoctorStatus : >-
 update doctor set status = ? where docID = ?

updateUserStatus : >-
 update users set status = ?, enabled=? where userid = ?
 
updateUserRoleStatus : >-
 update userrole set status= ? where userid = ?
  
fetchMaxId : >-
 select max(CAST(SUBSTRING_INDEX(docID,'-',-1) as decimal)) from doctor
 
fetchDocInfo : >-
 select d.docID, d.fname, d.mname, d.lname, d.dob, d.gender, d.doj, d.age, d.address1, d.city, d.state, d.country, 
 d.pcode, d.ssn, d.landphone, d.mobile, d.email, d.prnum, d.qualification, d.specialization, d.shift, d.etype,
 d.department, d.designation, CONCAT(d.fname,' ', d.mname,' ', d.lname) as fullName, (select username from users where users.userid = d.docID ) as username, (select password from users where users.userid = d.docID) as password,
 d.address2, d.id as branchId, br.name as branchName, d.status from doctor d join branchdetails br on d.id = br.id where DATE_FORMAT(STR_TO_DATE(d.doj, '%Y-%m-%d'),'%Y-%m-%d') between DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') 
 and DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') order by CAST(SUBSTRING_INDEX(d.docID,'-',-1) as decimal) desc limit ?

fetchDocInfoWithFilters : >-
 select d.docID, d.fname, d.mname, d.lname, d.dob, d.gender, d.doj, d.age, d.address1, d.city, d.state, d.country, d.pcode, d.ssn, d.landphone, d.mobile, d.email, d.prnum, d.qualification,
 d.specialization, d.shift, d.etype, d.department, d.designation, CONCAT(d.fname,' ',d.mname,' ',d.lname) as fullName, (select username from users where users.userid = d.docID ) as username, (select password from users where users.userid = d.docID) as password, d.address2,
 d.id as branchId, br.name as branchName, d.status from doctor d join branchdetails br on d.id = br.id where DATE_FORMAT(STR_TO_DATE(d.doj, '%Y-%m-%d'),'%Y-%m-%d') between DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') and DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') 
 and (d.fname like ? or d.mname like ? or d.lname like ?) order by CAST(SUBSTRING_INDEX(d.docID,'-',-1) as decimal) desc limit ?
 
fetchPrescriptionInfoDoc : >-
 select distinct pr1.pid, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, pr1.date, pr1.fileno, pr1.buttonval, pr1.tabid, pr1.textval, pr1.docid, concat(d.fname,' ',d.mname,' ',d.lname) doctor from prescription1 pr1
 join patient pat on pr1.pid = pat.pid join doctor d on pr1.docid = d.docID where pr1.docid in (select userid from userrole where username = ?) group by pr1.fileno order by CAST(SUBSTRING_INDEX(pr1.pid,'-',-1) as decimal) desc

fetchPrescriptionInfoOthers : >-
 select distinct pr1.pid, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, pr1.date, pr1.fileno, pr1.buttonval, pr1.tabid, pr1.textval, pr1.docid, concat(d.fname,' ',d.mname,' ',d.lname) doctor from prescription1 pr1 join patient pat 
 on pr1.pid = pat.pid left outer join doctor d on pr1.docid = d.docID  group by pr1.fileno order by CAST(SUBSTRING_INDEX(pr1.pid,'-',-1) as decimal) desc

fetchAppointmentInfoDoc : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno, ap.active, p.mobile, ap.diagactive, 
 ap.id as branchId from appointment ap join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID where ap.docid in (select userid from userrole where username = ?)  and ap.active = 'on' and ap.id = ? order by STR_TO_DATE(ap.appointment, '%Y-%m-%d') desc, time limit ?
 
fetchAppointmentInfoOthers : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno, ap.active, p.mobile, ap.diagactive, ap.id as branchId from appointment ap 
 join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID where ap.active = 'on'and ap.id = ? order by STR_TO_DATE(ap.appointment, '%Y-%m-%d')desc, time limit ?

fetchAllAppointmentInfoWithFilters : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno, ap.active, p.mobile, ap.diagactive, ap.id as branchId from appointment ap 
 join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID  where ap.docid in (select userid from userrole where username = ? ) and ap.id = ? and (p.fname like ? or p.mname like ? or p.lname like ? ) limit ?
 
fetchAllAppointmentInfoOthersWithFilters : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno, ap.active, p.mobile, ap.diagactive, ap.id as branchId from appointment ap 
 join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID  where ap.id = ? and (p.fname like ? or p.mname like ? or p.lname like ? ) limit ?
 
fetchAppointmentDocInfoWithFilters : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno, ap.active, p.mobile, ap.diagactive, ap.id as branchId from appointment ap 
 join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID  where ap.docid in (select userid from userrole where username = ? )  and ap.active = 'on' and ap.id = ? and (p.fname like ? or p.mname like ? or p.lname like ? ) order by STR_TO_DATE(ap.appointment, '%Y-%m-%d') desc, time limit ?

fetchAppointmentOthersInfoWithFilters : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno, ap.active, p.mobile, ap.diagactive, ap.id as branchId from appointment ap join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID 
 where ap.active = 'on' and ap.id = ? order by STR_TO_DATE(ap.appointment, '%Y-%m-%d') desc, time limit ?
 
fetchAppointmentDocInfoWithIdFilters : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno, ap.active, p.mobile, ap.diagactive, ap.id as branchId from appointment ap 
 join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID  where ap.docid in (select userid from userrole where username = ? )  and ap.active = 'on' and ap.id = ? and (p.fname like ? or p.mname like ? or p.lname like ? ) and p.pid like ? order by STR_TO_DATE(ap.appointment, '%Y-%m-%d') desc, time limit ?

fetchAppointmentOthersInfoWithIdFilters : >-
 select ap.docid,CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno, ap.active, p.mobile, ap.diagactive, ap.id as branchId from appointment ap 
 join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID where ap.active = 'on'and ap.id = ? and (p.fname like ? or p.mname like ? or p.lname like ?) and p.pid like ? order by STR_TO_DATE(ap.appointment, '%Y-%m-%d')desc,time  limit ?

fetchDocAppointmentInfoForDiagnose : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid,CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno from appointment ap join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID 
 where ap.fileno not in (select fileno from $tablename) and ap.docid in (select userid from userrole where username = ?)  and ap.active = 'on'

fetchOtherppointmentInfoForDiagnose : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid,CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno from appointment ap join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID 
 where ap.fileno not in (select fileno from $tablename) and ap.active = 'on'
 
fetchDocDiagnoseAndAdmitInfo : >-
 select ap.docid,CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, ap.fileno, (select prescription.pir from prescription where prescription.fileno = ap.fileno) prescriptionDetails from admitpat ap join patient p on ap.pid = p.pid join doctor d on ap.docid = d.docID 
 where ap.docid in (select userid from userrole where username = ? ) and ap.fileno not in (select fileno from labupload) union (select di.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, di.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, di.fileno, (select prescription.pir from prescription where prescription.fileno=di.fileno) prescriptionDetails 
 from diagnose di join patient p on di.pid=p.pid join doctor d on di.docid = d.docID where di.docid in (select userid from userrole where username = ?) and di.fileno not in (select fileno from labupload)) union (select cd.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, cd.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient,
 cd.fileno, (select prescription.pir from prescription where prescription.fileno=cd.fileno) prescriptionDetails from cdiagnose cd join patient p on cd.pid = p.pid join doctor d on cd.docid = d.docID where cd.docid in (select userid from userrole where username = ?) and cd.fileno not in (select fileno from labupload)) limit ?

fetchOthersDiagnoseAndAdmitInfo : >-
 select ap.docid,CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, ap.fileno, (select prescription.pir from prescription where prescription.fileno = ap.fileno) prescriptionDetails from admitpat ap join patient p on ap.pid = p.pid join doctor d on ap.docid = d.docID 
 where ap.id = ? and ap.fileno not in (select fileno from labupload) union (select di.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, di.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, di.fileno, (select prescription.pir from prescription where prescription.fileno=di.fileno) prescriptionDetails 
 from diagnose di join patient p on di.pid=p.pid join doctor d on di.docid = d.docID where di.id = ? and di.fileno not in (select fileno from labupload)) union (select cd.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, cd.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient,
 cd.fileno, (select prescription.pir from prescription where prescription.fileno=cd.fileno) prescriptionDetails from cdiagnose cd join patient p on cd.pid = p.pid join doctor d on cd.docid = d.docID where cd.id = ? and cd.fileno not in (select fileno from labupload)) limit ?
 
fetchDocDiagnoseAndAdmitInfoWithFilter : >-
 select ap.docid,CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, ap.fileno, (select prescription.pir from prescription where prescription.fileno = ap.fileno) prescriptionDetails from admitpat ap join patient p on ap.pid = p.pid join doctor d on ap.docid = d.docID 
 where ap.docid in (select userid from userrole where username = ? ) and ap.fileno not in (select fileno from labupload) and (p.fname like ? or p.mname like ? or p.lname like ?)  union (select di.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, di.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, di.fileno, 
 (select prescription.pir from prescription where prescription.fileno=di.fileno) prescriptionDetails from diagnose di join patient p on di.pid=p.pid join doctor d on di.docid = d.docID where di.docid in (select userid from userrole where username = ?) and di.fileno not in (select fileno from labupload) and (p.fname like ? or p.mname like ? or p.lname like ?)) 
 union (select cd.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, cd.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, cd.fileno, (select prescription.pir from prescription where prescription.fileno=cd.fileno) prescriptionDetails from cdiagnose cd join patient p on cd.pid = p.pid join doctor d on cd.docid = d.docID where cd.docid in (select userid from userrole where username = ?) 
 and cd.fileno not in (select fileno from labupload) and (p.fname like ? or p.mname like ? or p.lname like ?)) limit ?

fetchOthersDiagnoseAndAdmitInfoWithFilter  : >-
 select ap.docid,CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, ap.fileno, (select prescription.pir from prescription where prescription.fileno = ap.fileno) prescriptionDetails from admitpat ap join patient p on ap.pid = p.pid join doctor d on ap.docid = d.docID 
 where ap.id = ? and ap.fileno not in (select fileno from labupload) and (p.fname like ? or p.mname like ? or p.lname like ?) union (select di.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, di.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, di.fileno, (select prescription.pir from prescription where prescription.fileno=di.fileno) prescriptionDetails 
 from diagnose di join patient p on di.pid=p.pid join doctor d on di.docid = d.docID where di.id = ? and di.fileno not in (select fileno from labupload) and (p.fname like ? or p.mname like ? or p.lname like ?)) union (select cd.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, cd.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient,
 cd.fileno, (select prescription.pir from prescription where prescription.fileno=cd.fileno) prescriptionDetails from cdiagnose cd join patient p on cd.pid = p.pid join doctor d on cd.docid = d.docID where cd.id = ? and cd.fileno not in (select fileno from labupload) and (p.fname like ? or p.mname like ? or p.lname like ?)) limit ?
 
fetchPatientsToAdmit : >-
 select docid, dname, pid, pname, admit, date, fileno from prescription1 where admit='yes' and date not in (select admdate from admitpat where admitpat.pid = prescription1.pid )
 
savePatientPrescriptionInfo : >-
 insert into prescription(docid, dname, pid, pname, admit, date, fileno, pc, pmsh, ph, dh, fh, ogh, psh, sge, scv, sres, sgas, smusc, sgenit, sendoc, sskin, scns, pge, poc, pns, pcv, prs, pas, pds, pir)
 values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)

setToInactiveAppointment : >-
 update appointment set active ='off' where pid = ? and appointment = ?
 
fetchInpatientTreatmentInfo : >-
 select concat(p.fname,' ',p.mname,' ',p.lname) patient, t.pid, adm.admdate, datetime, dailychart, t.dname, comments, ncomments, t.admitno, t.fileno from treatment t join patient p on p.pid = t.pid join admitpat adm on adm.admitno = t.admitno where t.admitno= ? and t.id = ?
 
saveInPatientTreatmentInfo : >-
 insert into treatment(pname, pid, admdate, datetime, dailychart, dname, comments, admitno, fileno, id) values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?) on duplicate key update datetime = values(datetime), dailychart = values(dailychart), dname = values(dname), comments = values(comments),
 ncomments = values(ncomments), id = values(id)
 
fetchPatientDischargeInfo : >-
 select ds.pid, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, pat.age, pat.gender, concat(d.fname,' ',d.mname,' ',d.lname) doctor, ds.docid, adm.admdate, ds.disdate, ds.investigation, ds.fileno, ds.admitno, concat(adm.wardno,'/',adm.bedno) wardDetails, ds.freeze, ds.dissum, ds.id from discharge ds 
 join patient pat on ds.pid = pat.pid join doctor d on ds.docid = d.docID join admitpat adm on ds.fileno = adm.fileno where ds.freeze = ? and ds.id = ? and SUBSTRING_INDEX(DATE_FORMAT(STR_TO_DATE(ds.disdate, '%d-%m-%Y'),'%Y-%m-%d'),' ',1) between DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') 
 and DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') order by  SUBSTRING_INDEX(DATE_FORMAT(STR_TO_DATE(disdate, '%d-%m-%Y'),'%Y-%m-%d'),' ',1) desc limit ?
 
savePatientDischargeInfo : >-
 insert into discharge(pid, pname, dname, docid, admdate, disdate, treatment, dissum, investigation, management, fileno, admitno, id) values(?, ?, ?, ?, ?, ?, ?, ?, ? ,? ,? ,? ,?) 
 on duplicate key update disdate = values(disdate), treatment =value(treatment), dissum=values(dissum), investigation=values(investigation), management=values(management), id=values(id)
 
fetchPatientDischargeInfoWithFilters : >-
 select ds.pid, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, pat.age, pat.gender, concat(d.fname,' ',d.mname,' ',d.lname) doctor, ds.docid, adm.admdate, ds.disdate, ds.investigation, ds.fileno,
 ds.admitno, concat(adm.wardno,'/',adm.bedno) wardDetails, ds.freeze, ds.dissum, ds.id from discharge ds join patient pat on ds.pid = pat.pid join doctor d on ds.docid = d.docID join admitpat adm on ds.fileno = adm.fileno 
 where ds.freeze = ? and ds.id = ? and (pat.fname like ? or pat.mname like '"+srch+"%' or pat.lname like ? ) and SUBSTRING_INDEX(DATE_FORMAT(STR_TO_DATE(ds.disdate, '%d-%m-%Y'),'%Y-%m-%d'),' ',1) between DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') and DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') 
 order by SUBSTRING_INDEX(DATE_FORMAT(STR_TO_DATE(disdate, '%d-%m-%Y'),'%Y-%m-%d'),' ',1) desc limit ?

savePatientDslipInfo : >-
 insert into dslip(pid, docid, disdate, treatment, dissum, investigation, management, fileno, admitno, revisit, ec, amno, id) values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
 on duplicate key update disdate = values(disdate), treatment = values(treatment), dissum = values(dissum), investigation = values(investigation), management = values(management),
 revisit = values(revisit), ec = values(ec), amno = values(amno), id = values(id)
 
fetchPatientDslipInfoWithFilters : >-
 select ds.pid, concat(pat.fname,' ',pat.mname,' ',pat.lname) pname, pat.age, pat.gender, concat(d.fname,' ',d.mname,' ',d.lname) dname, ds.docid, adm.admdate, ds.disdate, ds.treatment, ds.dissum, ds.investigation, ds.management, ds.fileno, ds.admitno, ds.ec, ds.revisit, ds.amno,
 concat(adm.wardno,'/',adm.bedno) wardno, ds.id from dslip ds join patient pat on ds.pid = pat.pid join doctor d on ds.docid = d.docID join admitpat adm on ds.fileno = adm.fileno where ds.id = ? and adm.pname like ? and SUBSTRING_INDEX(DATE_FORMAT(STR_TO_DATE(ds.disdate, '%d-%m-%Y'),'%Y-%m-%d'),' ',1) between DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d')
 and DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') order by CAST(SUBSTRING_INDEX(ds.pid,'-',-1) as decimal) desc limit ?

fetchPatientDslipWithoutDateFilters : >-
 select ds.pid, concat(pat.fname,' ',pat.mname,' ',pat.lname) pname, pat.age, pat.gender, concat(d.fname,' ',d.mname,' ',d.lname) dname, ds.docid, adm.admdate, ds.disdate, ds.treatment, ds.dissum, ds.investigation, ds.management, ds.fileno, ds.admitno, ds.ec, ds.revisit, ds.amno,
 concat(adm.wardno,'/',adm.bedno) wardno, ds.id from dslip ds join patient pat on ds.pid = pat.pid join doctor d on ds.docid = d.docID join admitpat adm on ds.fileno = adm.fileno where ds.id = ? and adm.pname like ? order by CAST(SUBSTRING_INDEX(ds.pid,'-',-1) as decimal) desc limit ?

fetchPatientDslipInfo : >-
 select ds.pid, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, pat.age, pat.gender, concat(d.fname,' ',d.mname,' ',d.lname) doctor, ds.docid, adm.admdate, ds.disdate, ds.treatment, ds.dissum, ds.investigation, ds.management, ds.fileno, ds.admitno, ds.ec, ds.revisit, ds.amno, concat(adm.wardno,'/',adm.bedno) wardno,
 ds.id from dslip ds join patient pat on ds.pid = pat.pid join doctor d on ds.docid = d.docID join admitpat adm on ds.fileno = adm.fileno where ds.id = ? and SUBSTRING_INDEX(DATE_FORMAT(STR_TO_DATE(ds.disdate, '%d-%m-%Y'),'%Y-%m-%d'),' ',1) between DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') and DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d')
 order by CAST(SUBSTRING_INDEX(ds.pid,'-',-1) as decimal) desc limit ?

fetchProductStocks : >-
 select name from erpho.product
 
savePrescriptionTabInfo : >-
 insert into prescriptiontab(pid,pname,fileno,typeofdr,drugname,strdrug,dm,baf,totn,nofdays,dosage,advice,id) values((select aa.pid from appointment aa where aa.fileno=?),?,?,?,?,?,?,?,?,?,?,?,?) on duplicate key update typeofdr=values(typeofdr),drugname=values(drugname),strdrug=values(strdrug),dm=values(dm),baf=values(baf),totn=values(totn),
 nofdays=values(nofdays),dosage=values(dosage),advice = values(advice),id=values(id)
 
savePrescriptionTabInfoWithAdvice : >-
 insert into prescriptiontab(pid,pname,fileno,typeofdr,drugname,strdrug,dm,baf,totn,nofdays,dosage,advice,id) values((select aa.pid from appointment aa where aa.fileno=?),?,?,?,?,?,?,?,?,?,?,?,?) on duplicate key update typeofdr=values(typeofdr),drugname=values(drugname),strdrug=values(strdrug),dm=values(dm),
 baf=values(baf),totn=values(totn),nofdays=values(nofdays),dosage=values(dosage),advice = values(advice),id=values(id)
 
updatePrescriptionTabInfo : >-
 update prescriptiontab set typeofdr=?,drugname=?,strdrug=?,dm=?,baf=?,totn=?,nofdays=?,dosage=?,advice=?,id=? where uqk=?

updatePrescriptionTabInfoWithoutDosage : >-
 update prescriptiontab set typeofdr=?,drugname=?,strdrug=?,dm=?,baf=?,totn=?,nofdays=?,advice=?,id=? where uqk=?
 
fetchPrescriptionTabInfo : >-
 select pt.pid, concat(p.fname,' ',p.mname,' ',p.lname) patient,pt.fileno,typeofdr,drugname,strdrug,dm,da,de,dn,baf,totn,nofdays,dosage,advice,uqk from prescriptiontab pt join patient p on pt.pid = p.pid where pt.fileno = ? and typeofdr not like 'null' and drugname not like 'null' and strdrug not like 'null' and 
 totn not like 'null' and nofdays not like 'null' and dosage not like 'null'
  
fetchPrescriptionTabHistory : >-
 select typeofdr,drugname,strdrug,dm,da,de,dn,baf,totn,nofdays,dosage,advice from prescriptiontab pt join patient p on pt.pid = p.pid where pt.pid = ? and typeofdr not like 'null' and drugname not like 'null' and strdrug not like 'null' and totn not like 'null' and nofdays  not like 'null' and dosage not like 'null'
 
fetchActiveDocUserIds : >-
 select userid as docID from userrole where username = ? and status='Active'
 
fetchAdmitPatientInfo : >-
 select distinct a.pid, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, a.docid, concat(d.fname,' ',d.mname,' ',d.lname) doctor, a.admdate, a.fileno, a.admitno, CONCAT(wardno,'/',bedno) wardno, a.cause, pat.age, pat.gender, a.id from admitpat a join appointment ap on a.fileno = ap.fileno join doctor d on a.docid = d.docID join patient pat on a.pid = pat.pid 
 where a.fileno not in (select fileno from $tablename) and a.id = ? limit ?
 
fetchAdmitPatientInfoWithFilter : >-
 select distinct a.pid, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, a.docid, concat(d.fname,' ',d.mname,' ',d.lname) doctor, a.admdate, a.fileno, a.admitno, CONCAT(wardno,'/',bedno) wardno, a.cause, pat.age, pat.gender, a.id from admitpat a join appointment ap on  a.fileno = ap.fileno join doctor d on a.docid = d.docID join patient pat on a.pid = pat.pid 
 where a.fileno not in (select fileno from $tablename) and a.id = ? and (pat.fname like ? or pat.mname like ? or pat.lname like ?) limit ?  
  
fetchAppointmentAcrossBranches : >- 
 select ap.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.appointment,ap.time,CONCAT(ap.appointment,' ',ap.time) appointmentTime, ap.fileno from appointment ap join patient p on ap.pid = p.pid join doctor d on ap.docid = d.docID order by ap.appointment desc limit ?

fetchAppointemntAcrossBranchesWithFilters : >-
 select ap.pid, concat(p.fname,' ',p.mname,' ',p.lname) patient, ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.appointment, ap.time, CONCAT(ap.appointment,' ',ap.time) appointmentTime,ap.fileno from appointment ap join patient p on ap.pid = p.pid join doctor d on ap.docid = d.docID where (p.fname like ? or p.mname like ? or p.lname like ?) 
 order by ap.appointment desc limit ?     

fetchDiagnosePatientsInfo : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from diagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno  where pr.id= ? and pr.docid in (select userid from users where username = ?) and pr.fileno in (select fileno from prescriptiontab)  limit ?

fetchDiagnosePatientsFilterInfo : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from diagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno  where prd.fileno = ? and pr.docid in (select userid from users where username = ?) and pr.fileno in (select fileno from prescriptiontab)  limit ?

fetchAllPatientsFromDiagWithNameFilter : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,pr.docid,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from diagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno and pr.fileno in (select fileno from prescriptiontab) where pr.id = ? and (p.fname like ? or p.mname like ? or p.lname like ?) limit ?
 
fetchAllPatientsFromDiag : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,pr.docid,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from diagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno and pr.fileno in (select fileno from prescriptiontab) where pr.id = ? limit ?
 
fetchAllPatientsFromDiagBasedFile : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,pr.docid,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from diagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno and pr.fileno in (select fileno from prescriptiontab) where pr.fileno = ? limit ?
 
fetchCdiagnosePatientsInfo : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from cdiagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno  where pr.id = ? and pr.docid in (select userid from users where username = ?) and pr.fileno in (select fileno from prescriptiontab)  limit ?
 
fetchCdiagnosePatientsInfoWithFileFilter : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from cdiagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno  where pr.id = ? and prd.fileno = ? and pr.docid in (select userid from users where username = ?) and pr.fileno in (select fileno from prescriptiontab)  limit ?
 
fetchCdianosePatientsInfoWithNameFilter : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from cdiagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno  where pr.id = ? and (p.fname like ? or p.mname like ? or p.lname like ?) and pr.docid in (select userid from users where username = ?) and pr.fileno in (select fileno from prescriptiontab) limit ?
 
fetchAllPatientsFromCdiagnose : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,pr.docid,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from cdiagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno and pr.fileno in (select fileno from prescriptiontab) where pr.id = ? limit ?
 
fetchAllPatientsFromCdiagnoseBasedFile : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,pr.docid,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from cdiagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno and pr.fileno in (select fileno from prescriptiontab) where pr.id = ? and pr.fileno = ? limit ?

fetchAllPatientsWithFileFromPrescTab : >-
 select distinct pr.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pr.fileno,pr.docid,concat(d.fname,' ',d.mname,' ',d.lname) doctor,p.age,prd.pds from cdiagnose pr join patient p on p.pid=pr.pid left outer join doctor d on d.docID = pr.docid join prescription prd on prd.fileno = pr.fileno and pr.fileno in (select fileno from prescriptiontab) where pr.id = ? and (p.fname like ? or p.mname like ? or p.lname like ?) limit ? 

fetchDiagnoseOtherInfo : >-
 select pr2.docid, concat(d.fname,' ',d.mname,' ',d.lname) doctor, d.specialization, pr2.pid, concat(p.fname,' ',p.mname,' ',p.lname) patient, pc, pmsh,ph,dh,fh,ogh,psh,sge,scv,sres,sgas,smusc,sgenit,sendoc,sskin,scns,pge,poc,pns,pcv,prs,pas,pds,pir,admit,date,pr2.fileno from prescription pr2 left outer join doctor d on d.docID = pr2.docid join patient p on pr2.pid = p.pid where pr2.fileno = ?

fetchTabAndButtonDetails : >-
 select distinct buttonval,tabid from prescription4
 
fetchPatientsFromAdmitTable : >-
 select adm.pid, concat(p.fname,' ',p.mname,' ',p.lname) patient, adm.docid, concat(d.fname,' ',d.mname,' ',d.lname) doctor, admitno, adm.fileno, p.age, adm.admdate, adm.cause from admitpat adm join patient p on p.pid = adm.pid join doctor d on adm.docid = d.docID 
 where adm.id = ? limit ?

fetchPatientsFromAdmitTableWithFilter : >-
 select adm.pid, concat(p.fname,' ',p.mname,' ',p.lname) patient, adm.docid, concat(d.fname,' ',d.mname,' ',d.lname) doctor, admitno, adm.fileno, p.age, adm.admdate, adm.cause from admitpat adm join patient p on p.pid = adm.pid join doctor d on adm.docid = d.docID 
 where adm.id = ? and (p.fname like ? or p.mname like ? or p.lname like ?) limit ? 
  
fetchPirFromPrescription : >-
 select pir from prescription pr2 left outer join doctor d on d.docID = pr2.docid join patient p on pr2.pid = p.pid where pr2.pid = ?
 
fetchIpdPrescriptionTabInfo : >-
 select pt.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,pt.fileno,typeofdr,drugname,strdrug,dm,da,de,dn,baf,totn,nofdays,pt.admitno,pt.docid,concat(d.fname,' ',d.mname,' ',d.lname) doctor,pt.edate,pt.diagnosed,pt.dosage from ipdprescription pt join patient p on pt.pid = p.pid left outer join doctor d on d.docID = pt.docid where pt.id=? and pt.fileno = ?
 
saveIpdPrescription : >-
 insert into ipdprescription(pid, docid, fileno, typeofdr, drugname, strdrug, dm, baf, totn, nofdays, admitno, edate, diagnosed, dosage, id) values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)on duplicate key update docid = values(docid), typeofdr=values(typeofdr), drugname=values(drugname), strdrug=values(strdrug), dm=values(dm), baf=values(baf), totn=values(totn), nofdays=values(nofdays), edate=values(edate), diagnosed = values(diagnosed), dosage = values(dosage), id=values(id)

fetchPreviousFileNos : >-
 select distinct pr.fileno, pr.date from prescription pr where pr.pid = ? and pr.fileno <> ? order by CAST(SUBSTRING_INDEX(pr.date,'-',-1) as decimal) asc              
 
fetchSickInfo : >-
 select concat(d.fname,' ',d.mname,' ',d.lname) doctor, sdate, work, other, reason, dates, dat, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, fin, pn, s.docid, timestamp from sicknote s join patient pat on pat.pid = s.pn join doctor d on d.docID=s.docid 
 where s.id = ?
 
saveSickInfo : >-
 insert into sicknote(pname, sdate, work, other, reason, dates, dat, pn, fin, docid, timestamp, id) values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) on duplicate key update pname = values(pname), sdate = values(sdate), work = values(work), other = values(other), reason = values(reason), dates = values(dates), dat = values(dat), pn = values(pn), fin = values(fin),
 docid = values(docid), timestamp = values(timestamp), id = values(id)

fetchReferralInfo : >-
 select redate, pname, treat, diagnosis, caseh, remarks, concat(d.fname,' ',d.mname,' ',d.lname) doctor, sign, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, fn, r.pid, r.docid, timestamp from referral r join patient pat on pat.pid = r.pid join doctor d on d.docID=r.docid where r.id = ?
       
saveReferralInfo : >-
 insert into referral(redate, pname, treat, diagnosis, caseh, remarks, dname, sign, pid, fn, docid, timestamp, id) values( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) on duplicate key update redate = values(redate), pname = values(pname), treat = values(treat), diagnosis = values(diagnosis), caseh = values(caseh), remarks = values(remarks) ,dname = values(dname),
 sign = values(sign), pid = values(pid), fn = values(fn), docid = values(docid), timestamp = values(timestamp), id = values(id)

fetchAllAppointmentInfo : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno, ap.active, p.mobile, ap.diagactive, 
 ap.id as branchId from appointment ap join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID where ap.docid in (select userid from userrole where username = ?) and ap.id = ?  limit ?
 
fetchAllAppointmentInfoOthers : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(ap.appointment,' ',ap.time) appointmentTime, p.pofvisit, ap.fileno, ap.active, p.mobile, ap.diagactive, ap.id as branchId from appointment ap 
 join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID where ap.id = ? limit ?
 
saveGlasgoComaInfo : >-
 insert into glasgowcoma(pid, fileno, admitno, date, spontaneous, response, obey, total, timestamp, id) values( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) on duplicate key update date = values(date),spontaneous = values(spontaneous), response = values(response), obey = values(obey), total = values(total), timestamp= values(timestamp), id = values(id)         
      
saveBlantyreComaInfo : >-
 insert into blantyrecoma(pid, fileno, admitno, date, localize, cry, dir, total, timestamp, id) values( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) on duplicate key update  date = values(date) ,localize = values(localize), cry = values(cry), dir = values(dir), total = values(total), timestamp = values(timestamp),id = values(id)
      
fetchGlasgowPatientsInfo : >-
 select g.pid, g.fileno, g.admitno, g.date from glasgowcoma where g.admitno = ?    

fetchGlasgowBlantyrePatientDetailsInfo : >-
 select time, type, amount, typecommence, amtgiv, urine, vomitus, remarks, admitno, doctord, doctsig, ratef, dremarks, date, aid from iochart2 where admitno = ? and date = ?
 
fetchDropdownDistinctDatesForPatientInfo : >-
 select distinct date as datec from glasgowcoma where id = ? and admitno = ? 

fetchOtherGlasgowPatientsInfo : >-
 select spontaneous, response, obey, date, total, timestamp from glasgowcoma where id = ? and admitno = ? and date = ?
 
fetchBlantyreComaInfo : >-
 select g.pid, g.fileno, g.admitno, g.date from blantyrecoma where g.admitno = ?
  
fetchDropdownDistinctDatesForPatientInfoBlantyre : >-
 select distinct date as datec from blantyrecoma where id = ? and admitno = ?
  
fetchOtherBlantyrePatientsInfo : >-
 select localize,cry,dir,date,total,timestamp from blantyrecoma where id = ? and admitno = ? and date = ?

deletePrescriptionInfo : >-
 delete from prescriptiontab where fileno = ? and drugname like ? and typeofdr like ?
 
deleteIpdPrescriptionInfo : >-
 delete from ipdprescription where fileno = ? and drugname like ? and typeofdr like ?

loadDiagnoseConfigTabHeader : >-
 select d.did, d.checkval, d.parentid, dh.header, d.hid from $tablename1 d right outer join $tablename2 dh on dh.hid = d.hid where parentid = ? and tabid = ?
 
loadDiagnoseConfigTabValues : >-
 select d.did, d.checkval, d.parentid, dh.header, d.hid from $tablename1 d right outer join $tablename2 dh on dh.hid = d.hid where d.level = ? and d.tabid = ?
 
loadHeaderConfigValues : >- 
 select hid, header from $tablename1 where tid = ? and header = ?
 
loadLevelConfigValues : >-
 select hid, header from $tablename1 where tid = ? and level = ?       
 
loadPatientDiagnoseHistoryData : >-
 select d.pid, d.fileno, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, doc.docid, concat(doc.fname,' ',doc.mname,' ',doc.lname) doctor, d.diagnose, d.datetime, d.id from $tablename1 d join patient pat on pat.pid = d.pid join doctor doc on doc.docid = d.docid limit ?
 
loadPatientDiagnoseHistoryFilterData : >-
 select d.pid, d.fileno, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, doc.docid, concat(doc.fname,' ',doc.mname,' ',doc.lname) doctor, d.diagnose, d.datetime, d.id from $tablename1 d join patient pat on pat.pid = d.pid join doctor doc on doc.docid = d.docid where (pat.fname like ? or pat.mname like ? or pat.lname like ?) and pat.pid like ? limit ?

fetchAllPatientsFromDisease : >-
 select d.pid, d.fileno, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, doc.docid, concat(doc.fname,' ',doc.mname,' ',doc.lname) doctor, d.diagnose, d.datetime from $tablename1 d join patient pat on pat.pid = d.pid join doctor doc on doc.docid = d.docid where diagnose like ?
 
fetchAllPatientFromDischarge : >-
 select d.pid, d.fileno, concat(pat.fname,' ',pat.mname,' ',pat.lname) patient, doc.docid, concat(doc.fname,' ',doc.mname,' ',doc.lname) doctor, concat('Diagnose Details',d.diagnose,'\n\nProvisional Diagnosis\n',prep.pds) diagnose, d.datetime, dp.investigation from $tablename1 d join patient pat on pat.pid = d.pid join doctor doc on doc.docid = d.docid right outer join prescription prep on prep.fileno = d.fileno left outer join discharge dp on dp.fileno = d.fileno where d.pid = ? and d.fileno = ?
 
fetchAllPatientsWithDifferentFileno : >-
 select b.name,d.pid,d.fileno,concat(pat.fname,' ',pat.mname,' ',pat.lname) patient,doc.docid,concat(doc.fname,' ',doc.mname,' ',doc.lname) doctor,concat('Diagnose Details',d.diagnose,'\n\nProvisional Diagnosis\n',prep.pds) Diag,d.datetime,dp.investigation from $tablename1 d join patient pat on pat.pid = d.pid join doctor doc on doc.docid = d.docid right outer join prescription prep on prep.fileno = d.fileno left outer join discharge dp on dp.fileno = d.fileno join branchdetails b on d.id=b.id 
 where d.pid = ? and d.fileno <> ?

fetchCompleteInPatientDischargeHistoryByPid : >-
 select b.name,d.pid,d.fileno,concat(pat.fname,' ',pat.mname,' ',pat.lname) patient,doc.docid,concat(doc.fname,' ',doc.mname,' ',doc.lname) doctor,concat('Diagnose Details',d.diagnose,'\n\nProvisional Diagnosis\n',prep.pds) Diag,d.datetime,dp.investigation,prep.admit from $tablename1 d join patient pat on pat.pid = d.pid join doctor doc on doc.docid = d.docid right outer join prescription prep on prep.fileno = d.fileno left outer join discharge dp on dp.fileno = d.fileno join branchdetails b 
 on d.id=b.id where d.pid = ?
 
fetchDocIdAndNameForAppointments : >-
 select usr.userid from userrole usr join doctor d on d.docID = usr.userid where usr.username = ?

saveChkBoxValues : >-
 insert into $tablename (checkval,level,hid,tabid,parentid) values(?,?,?,?,?) on duplicate key update checkval = values(checkval), tabid = values(tabid), hid= values(hid), parentid = values(parentid), level = values(level)
  
updateTabs : >-
 update $tablename set tabvalue = ? where tid = ?
 
updateCheckboxNames : >-
 update $tablename set checkval = ? where did = ?
 
updateDiagHeader : >-
 update $tablename set header = ?, level = ? where hid = ?
 
saveDiagHeader : >-
 insert into $tablename(tid,header,level) values(?,?,?) on duplicate key update header = values(header), tid = values(tid)
 
saveDiagTab : >-
 insert into $tablename (tabvalue) values( ? ) on duplicate key update tabvalue = values(tabvalue)
 
saveDiagnoseDetails : >-
 insert into $tablename (pid,fileno,docid,datetime,diagnose,id) values((select aa.pid from appointment aa where aa.fileno=?),?,?,?,?,?) on duplicate key update docid = values(docid),diagnose = values(diagnose),datetime = values(datetime),id=values(id)            

fetchTeethData : >-
 select teid,teethval from $tablename
 
fetchDiagnoseDetails : >-
 select fileno,datetime,diagnose,docid from $tablename where fileno = ?
 
fetchTabValueDetails : >-
 select tid,tabvalue from $tablename where tid = ?
 
fetchCheckBoxValues : >-
 select did,checkval from $tablename where did = ?
 
fetchHeaderTabValues : >-
 select hid,header from $tablename where hid = ?
   
fetchTabValuesForLab : >-
 select tid,tabvalue from $tablename where tabvalue = 'lab'
 
fetchAllTabValues : >-
 select tid,tabvalue from $tablename
 
fetchAllTabsByValue : >- 
 select tid,tabvalue from $tablename where tabvalue = ? 
        
fetchTotalOpdCounts : >-
 select (select count(distinct fileno ) from diagnose where DATE_FORMAT(curdate(), '%d-%m-%Y') = SUBSTRING_INDEX(datetime,' ',1) and id= ?)+(select count(distinct fileno ) from cdiagnose where id = ? and  DATE_FORMAT(curdate(), '%d-%m-%Y') = SUBSTRING_INDEX(datetime,' ',1))
 
fetchTotalIpdCounts : >- 
 select count(distinct fileno) from admitpat where id = ? and fileno not in (select fileno from discharge)
        
fetchDepartments : >-
 select department from deptdesig where department not like 'NA'
 
fetchSpecialization : >-
 select specialization from deptdesig where specialization not like 'NA'
 
fetchPatientsForLabUploadInfo : >-
 select l.pid, concat(p.fname,' ',p.mname,' ',p.lname) patient, l.fileno, l.docid, l.date, concat(d.fname,' ',d.mname,' ',d.lname) doctor, l.pir from prescription l join patient p on l.pid = p.pid join doctor d on d.docID = l.docid where l.id = ? and l.pir is not null and pir <> '' limit ?
 
fetchPatientsForLabUploadFilter : >-
 select l.pid,concat(p.fname,' ',p.mname,' ',p.lname)patient,l.fileno,l.docid,l.date,concat(d.fname,' ',d.mname,' ',d.lname)Doctor,l.pir from prescription l join patient p on l.pid = p.pid join doctor d on d.docID = l.docid where l.id = ? and (p.fname like ? or p.mname like ? or p.lname like ?) and l.pir is not null and pir <> '' limit ?
 
fetchInfoFromDiagAndCdiag : >-
 select ap.docid, CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, ap.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, ap.datetime, ap.fileno,'diag' from diagnose ap join patient p on ap.pid=p.pid join doctor d on ap.docid = d.docID where ap.id = ? and SUBSTRING_INDEX(DATE_FORMAT(STR_TO_DATE(ap.datetime, '%d-%m-%Y'),'%Y-%m-%d'),' ',1) between DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') and DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d') union 
 (select cd.docid,CONCAT(d.fname,' ', d.mname,' ',d.lname) doctor, cd.pid, CONCAT(p.fname,' ', p.mname,' ',p.lname) patient, CONCAT(cd.datetime), cd.fileno,'cdiag' from cdiagnose cd join patient p on cd.pid=p.pid join doctor d on cd.docid = d.docID where cd.id = ? and SUBSTRING_INDEX(DATE_FORMAT(STR_TO_DATE(cd.datetime, '%d-%m-%Y'),'%Y-%m-%d'),' ',1) between DATE_FORMAT(STR_TO_DATE( ?, '%Y-%m-%d'),'%Y-%m-%d') and DATE_FORMAT(STR_TO_DATE(?, '%Y-%m-%d'),'%Y-%m-%d')) 
 order by  SUBSTRING_INDEX(DATE_FORMAT(STR_TO_DATE(datetime, '%d-%m-%Y'),'%Y-%m-%d'),' ',1) desc limit ?
           
fetchDischargeHistoryInfo : >-
 select b.name as branchName,d.pid,d.fileno,concat(pat.fname,' ',pat.mname,' ',pat.lname) patient,doc.docid,concat(doc.fname,' ',doc.mname,' ',doc.lname) doctor,concat('Diagnose Details',d.diagnose,'\n\nProvisional Diagnosis\n',prep.pds) Diag,d.datetime,dp.investigation from $tablename d join patient pat on pat.pid = d.pid join doctor doc on doc.docid = d.docid right outer join prescription prep on prep.fileno = d.fileno left outer join discharge dp on dp.fileno = d.fileno join branchdetails b on d.id=b.id where d.pid = ?
            
fetchAllPrescrptionTabByFileno : >-
 select pr3.pid,concat(p.fname,' ',p.mname,' ',p.lname) patient,date,fileno,buttonval,tabid,textval,docid,dname,admit from prescription1 pr3 join patient p on pr3.pid = p.pid where pr3.fileno = ?
 
             